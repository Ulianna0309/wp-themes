export default {
    init() {
        document.querySelector(".hamburger").addEventListener("click", e => {
            document.querySelector(".hamburger").classList.toggle("active");
            document
                .querySelector(".navbar-default")
                .classList.toggle("mobile-menu-active");
        });

        if (document.querySelector("#commentform") && document.getElementById("email")) {
            function emailIsValid(email) {
                return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
            }
            function commentValidator(event) {
                let commentText = document.getElementById("comment").value > 5;
                let authorEmail = document.getElementById("email").value;
                let authorName = document.getElementById("author").value.length > 3;
                let validEmail = emailIsValid(authorEmail);
                if (validEmail) {
                    document.getElementById("email").classList.remove("error");
                } else {
                    document.getElementById("email").classList.add("error");
                }
                if (authorName) {
                    document.getElementById("author").classList.remove("error");
                } else {
                    document.getElementById("author").classList.add("error");
                }
                if (commentText) {
                    document.getElementById("comment").classList.remove("error");
                } else {
                    document.getElementById("comment").classList.add("error");
                }
                if (validEmail && authorName && commentText && event === "submit") {
                    document
                        .getElementById("commentform")
                        .classList.add("hidden")
                        .submit();
                }
            }
            document
                .querySelector("#commentform")
                .addEventListener("submit", function(e) {
                    e.preventDefault();
                    commentValidator("submit");
                });
        }

        document.cookie.match("cookie-policy") === null &&
        document.querySelector("#cookiebanner").classList.remove("hidden");
        document.querySelector("#cookie-apply") &&
        document.querySelector("#cookie-apply").addEventListener("click", e => {
            e.preventDefault();
            document.cookie = "cookie-policy=apply";
            document.querySelector("#cookiebanner").classList.add("hidden");
        });
    },
    finalize() {
        // JavaScript to be fired on all pages, after page specific JS is fired
    }
};
